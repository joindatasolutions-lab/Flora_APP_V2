<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Flora - Cat√°logo de Arreglos Florales</title>

  <!-- Fuentes externas -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  
  <!-- Librer√≠as de UI -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

  <!-- Estilos principales -->
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <!-- ========================================
       HEADER: Logo, t√≠tulo y controles
       ======================================== -->
  <header class="catalog-header">
    <div class="logo-area">
      <img src="img/logo 2024 marca registrada-04.png" alt="Flora Logo">
    </div>

    <div class="title-area">
      <h2>Cat√°logo de Arreglos Florales</h2>
    </div>

    <div class="controls-area">
      <!-- Buscador -->
      <div class="search-box">
        <label for="searchInput" class="visually-hidden">Buscar productos</label>
        <input 
          type="text" 
          id="searchInput" 
          placeholder="Buscar..." 
          oninput="filtrarCatalogo()"
          aria-label="Buscar en el cat√°logo">
      </div>

      <!-- Filtro de categor√≠a (se llena din√°micamente) -->
      <div class="filtro-categorias-container">
        <label class="filtro-label" for="filtroCategorias">Categor√≠a:</label>
        <select id="filtroCategorias" class="filtro-select">
          <option value="">Todas las categor√≠as</option>
        </select>
      </div>
    </div>
  </header>

  <!-- ========================================
       VISTA CAT√ÅLOGO: Grid de productos
       ======================================== -->
  <section id="viewCatalog" class="view active">
    <!-- Bot√≥n para crear arreglo personalizado -->
    <div style="text-align:center; margin-bottom:20px;">
      <button 
        class="btn-primary" 
        id="btnIrPersonalizado"
        aria-label="Ir a crear arreglo personalizado">
        üå∏ Crear Arreglo Personalizado
      </button>
    </div>
    
    <!-- Contenedor din√°mico de productos -->
    <div id="catalogo" class="catalogo" role="list" aria-label="Lista de productos"></div>
  </section>

  <!-- ========================================
       DRAWER CARRITO: Panel deslizable
       ======================================== -->
  <aside id="drawerCarrito" class="drawer" role="complementary" aria-label="Carrito de compras">
    <div class="drawer-header">
      <strong>üõçÔ∏è Tu carrito</strong>
      <button id="cerrarDrawer" class="icon-btn">‚úï</button>
    </div>
    <div class="drawer-body">
      <ul id="cartItemsDrawer" class="cart-list"></ul>
      <div class="drawer-footer">
        <div class="subtotal">
          <p><strong>Subtotal:</strong> $<span id="subtotalDrawer">0</span></p>
          <p><strong>IVA:</strong> $<span id="ivaDrawer">0</span></p>
          <p><strong>Domicilio:</strong> $<span id="domicilioDrawer">0</span></p>
          <h3><strong>Total:</strong> $<span id="totalDrawer">0</span></h3>
        </div>
        <div class="drawer-actions">
          <button id="vaciarCarrito" class="btn-outline" aria-label="Vaciar carrito">Vaciar</button>
          <button id="btnPedidoDrawer" class="btn-primary" aria-label="Continuar con el pedido">Continuar</button>
        </div>
      </div>
    </div>
  </aside>

  <!-- ========================================
       BOT√ìN FLOTANTE: Acceso r√°pido al carrito
       ======================================== -->
  <button id="btnDrawer" class="cart-fab" aria-label="Abrir carrito de compras">
    üõçÔ∏è<span class="cart-text">Continuar</span>
      <span id="cartCount" aria-live="polite">0</span>
  </button>

  <!-- ========================================
       VISTA FORMULARIO: Datos del pedido
       ======================================== -->
  <section id="viewForm" class="view">
    <form id="pedidoForm" aria-label="Formulario de pedido">
      <div class="pedido-summary" id="resumenProducto" role="status" aria-live="polite">üõç Tu pedido</div>

      <div class="wizard-progress" aria-hidden="true">
        <div class="wizard-progress-track">
          <div id="wizardProgressBar" class="wizard-progress-fill"></div>
        </div>
        <div class="wizard-step-labels">
          <span class="active" data-step-label="1">Cliente</span>
          <span data-step-label="2">Entrega</span>
          <span data-step-label="3">Tarjeta</span>
          <span data-step-label="4">Confirmaci√≥n</span>
        </div>
      </div>

      <div class="wizard-step active" data-step="1">
        <h3>Informaci√≥n del cliente
          <span id="badgeCliente" class="badge warn" role="status">Nuevo cliente</span>
        </h3>
        <div class="grid">
          <div>
            <label for="tipoIdent">Tipo de identificaci√≥n</label>
            <select id="tipoIdent" name="tipoIdent" required>
              <option value="CEDULA" selected>C√©dula</option>
              <option value="NIT">NIT</option>
              <option value="PASAPORTE">Pasaporte o ID</option>
            </select>
          </div>
          <div>
            <label for="identificacion">Identificaci√≥n</label>
            <input id="identificacion" type="number" name="identificacion" required>
          </div>
          <div>
            <label for="telefono">Tel√©fono WhatsApp</label>
            <div class="phone-fixed-wrapper">
              <span class="phone-fixed-prefix">+57</span>
              <input id="telefono" name="telefono" type="tel" inputmode="numeric" pattern="3[0-9]{9}" placeholder="3001234567" required>
            </div>
          </div>
          <div>
            <label for="primerNombre">Nombre</label>
            <input id="primerNombre" name="primerNombre" type="text" required>
          </div>
          <div>
            <label for="primerApellido">Apellido(s)</label>
            <input id="primerApellido" name="primerApellido" type="text">
          </div>
          <div>
            <label for="email">Email (opcional)</label>
            <input id="email" name="email" type="email" autocomplete="email">
          </div>
        </div>
        <div class="actions wizard-actions">
          <button type="button" class="btn-outline" id="btnVolver" aria-label="Regresar al cat√°logo">Regresar</button>
          <button type="button" class="btn-primary" data-wizard-next>Siguiente</button>
        </div>
      </div>

      <div class="wizard-step" data-step="2">
        <h3>Informaci√≥n de entrega</h3>
        <div class="grid">
          <div>
            <label for="destinatario">Destinatario</label>
            <input id="destinatario" name="destinatario" type="text" required>
          </div>
          <div>
            <label for="telefonoDestino">Tel√©fono destino (opcional)</label>
            <div class="phone-fixed-wrapper">
              <span class="phone-fixed-prefix">+57</span>
              <input id="telefonoDestino" name="telefonoDestino" type="tel" inputmode="numeric" pattern="3[0-9]{9}" placeholder="3001234567">
            </div>
          </div>
          <div>
            <label for="direccionCompleta">Direcci√≥n completa</label>
            <input id="direccionCompleta" name="direccionCompleta" type="text" placeholder="Ej: Calle 10 #20-30 apto 502" required>
          </div>
          <div class="barrio-container">
            <label for="buscarBarrio">Barrio</label>
            <input id="buscarBarrio" type="search" placeholder="Busca y selecciona un barrio..." aria-label="Buscar barrio">
            <select id="barrio" name="barrio" required onchange="actualizarDomicilio()" aria-label="Seleccionar barrio"></select>
            <small id="barrioCostoInfo" class="help-text">Costo de domicilio: $0</small>
          </div>
        </div>
        <div class="entrega-fecha-hora">
          <div>
            <label for="fechaEntrega">Fecha de entrega</label>
            <input id="fechaEntrega" name="fechaEntrega" type="date">
          </div>
        </div>
        <div class="actions wizard-actions">
          <button type="button" class="btn-outline" data-wizard-prev>Anterior</button>
          <button type="button" class="btn-primary" data-wizard-next>Siguiente</button>
        </div>
      </div>

      <div class="wizard-step" data-step="3">
        <div class="section-card">
          <h3 class="section-title">Mensaje para la tarjeta</h3>
          <div class="grid">
            <div class="grid-1">
              <label for="mensaje">Mensaje</label>
              <textarea id="mensaje" name="mensaje" placeholder="Ej: Te mando un abrazo enorme en tu dia especial."></textarea>
              <p class="help-text">Esto es lo que aparecer√° impreso en la tarjeta del arreglo.</p>
            </div>
          </div>
        </div>

        <div class="section-card">
          <h3 class="section-title">Firma del mensaje</h3>
          <div class="grid">
            <div>
              <label for="firma">Firma</label>
              <input type="text" id="firma" name="firma" placeholder="Ej: Con carino, Laura y Carlos">
              <p class="help-text">Indica quien envia el mensaje.</p>
            </div>
          </div>
        </div>

        <div class="section-card observaciones-card" id="observacionesCard">
          <h3 class="section-title observaciones-title">OBSERVACIONES / ARREGLO PERSONALIZADO</h3>
          <div class="grid">
            <div class="grid-1">
              <label for="observaciones">Observaciones</label>
              <textarea id="observaciones" name="observaciones" placeholder="Ej: Colores pastel, rosas y lirios, estilo romantico, tamano mediano."></textarea>
              <p class="help-text">Instrucciones para el florista (colores, flores, tamano, estilo, detalles especiales).</p>
            </div>
          </div>
        </div>

        <div class="actions wizard-actions">
          <button type="button" class="btn-outline" data-wizard-prev>Anterior</button>
          <button type="button" class="btn-primary" data-wizard-next>Siguiente</button>
        </div>
      </div>

      <div class="wizard-step" data-step="4">
        <h3>Resumen de confirmaci√≥n</h3>
        <div id="confirmSummary" class="confirm-summary" aria-live="polite"></div>
        <div class="actions wizard-actions">
          <button type="button" class="btn-outline" data-wizard-prev>Anterior</button>
          <button type="submit" class="btn-primary" id="btnSubmit" aria-label="Confirmar y enviar pedido" disabled>Confirmar pedido</button>
        </div>
      </div>

      <input type="hidden" id="domicilio" name="domicilio">
      <input type="hidden" id="iva" name="iva">
      <input type="hidden" id="total" name="total">
    </form>
  </section>

  <!-- ========================================
       SCRIPTS: L√≥gica de la aplicaci√≥n
       ======================================== -->
  <script src="categorias.js"></script>
  <script src="script.js?v=20260201"></script>
</body>
</html>
